--- 1/24/2024 ---
master_eqtable =
 
[       0,        0,       0,       0,      0,    0,  0, 1,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[    x1^7,     x1^6,    x1^5,    x1^4,   x1^3, x1^2, x1, 1,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 1,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0, x2^7, x2^6, x2^5, x2^4, x2^3, x2^2, x2, 1,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 1,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0, x3^7, x3^6, x3^5, x3^4, x3^3, x3^2, x3, 1,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 1]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,     x4^7,     x4^6,    x4^5,    x4^4,   x4^3, x4^2, x4, 1]
[  7*x1^6,   6*x1^5,  5*x1^4,  4*x1^3, 3*x1^2, 2*x1,  1, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,   7*x4^6,   6*x4^5,  5*x4^4,  4*x4^3, 3*x4^2, 2*x4,  1, 0]
[ 42*x1^5,  30*x1^4, 20*x1^3, 12*x1^2,   6*x1,    2,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,  42*x4^5,  30*x4^4, 20*x4^3, 12*x4^2,   6*x4,    2,  0, 0]
[210*x1^4, 120*x1^3, 60*x1^2,   24*x1,      6,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0, 210*x4^4, 120*x4^3, 60*x4^2,   24*x4,      6,    0,  0, 0]
[       7,        6,       5,       4,      3,    2,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[      42,       30,      20,      12,      6,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[     210,      120,      60,      24,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[     840,      360,     120,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[    2520,      720,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[    5040,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    7,    6,    5,    4,    3,    2,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,   42,   30,   20,   12,    6,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,  210,  120,   60,   24,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,  840,  360,  120,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0, 2520,  720,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0, 5040,    0,    0,    0,    0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,    7,    6,    5,    4,    3,    2,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,   42,   30,   20,   12,    6,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,  210,  120,   60,   24,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0,  840,  360,  120,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0, 2520,  720,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
[       0,        0,       0,       0,      0,    0,  0, 0,    0,    0,    0,    0,    0,    0,  0, 0, 5040,    0,    0,    0,    0,    0,  0, 0,        0,        0,       0,       0,      0,    0,  0, 0]
 
 
deriv_tables =
 
[        0,        0,       0,       0,      0,    0,  0, 1,         0,        0,       0,       0,      0,    0,  0, 1,         0,        0,       0,       0,      0,    0,  0, 1,         0,        0,       0,       0,      0,    0,  0, 1]
[     x1^7,     x1^6,    x1^5,    x1^4,   x1^3, x1^2, x1, 1,      x2^7,     x2^6,    x2^5,    x2^4,   x2^3, x2^2, x2, 1,      x3^7,     x3^6,    x3^5,    x3^4,   x3^3, x3^2, x3, 1,      x4^7,     x4^6,    x4^5,    x4^4,   x4^3, x4^2, x4, 1]
[        0,        0,       0,       0,      0,    0,  1, 0,         0,        0,       0,       0,      0,    0,  1, 0,         0,        0,       0,       0,      0,    0,  1, 0,         0,        0,       0,       0,      0,    0,  1, 0]
[   7*x1^6,   6*x1^5,  5*x1^4,  4*x1^3, 3*x1^2, 2*x1,  1, 0,    7*x2^6,   6*x2^5,  5*x2^4,  4*x2^3, 3*x2^2, 2*x2,  1, 0,    7*x3^6,   6*x3^5,  5*x3^4,  4*x3^3, 3*x3^2, 2*x3,  1, 0,    7*x4^6,   6*x4^5,  5*x4^4,  4*x4^3, 3*x4^2, 2*x4,  1, 0]
[        0,        0,       0,       0,      0,    2,  0, 0,         0,        0,       0,       0,      0,    2,  0, 0,         0,        0,       0,       0,      0,    2,  0, 0,         0,        0,       0,       0,      0,    2,  0, 0]
[  42*x1^5,  30*x1^4, 20*x1^3, 12*x1^2,   6*x1,    2,  0, 0,   42*x2^5,  30*x2^4, 20*x2^3, 12*x2^2,   6*x2,    2,  0, 0,   42*x3^5,  30*x3^4, 20*x3^3, 12*x3^2,   6*x3,    2,  0, 0,   42*x4^5,  30*x4^4, 20*x4^3, 12*x4^2,   6*x4,    2,  0, 0]
[        0,        0,       0,       0,      6,    0,  0, 0,         0,        0,       0,       0,      6,    0,  0, 0,         0,        0,       0,       0,      6,    0,  0, 0,         0,        0,       0,       0,      6,    0,  0, 0]
[ 210*x1^4, 120*x1^3, 60*x1^2,   24*x1,      6,    0,  0, 0,  210*x2^4, 120*x2^3, 60*x2^2,   24*x2,      6,    0,  0, 0,  210*x3^4, 120*x3^3, 60*x3^2,   24*x3,      6,    0,  0, 0,  210*x4^4, 120*x4^3, 60*x4^2,   24*x4,      6,    0,  0, 0]
[        0,        0,       0,      24,      0,    0,  0, 0,         0,        0,       0,      24,      0,    0,  0, 0,         0,        0,       0,      24,      0,    0,  0, 0,         0,        0,       0,      24,      0,    0,  0, 0]
[ 840*x1^3, 360*x1^2,  120*x1,      24,      0,    0,  0, 0,  840*x2^3, 360*x2^2,  120*x2,      24,      0,    0,  0, 0,  840*x3^3, 360*x3^2,  120*x3,      24,      0,    0,  0, 0,  840*x4^3, 360*x4^2,  120*x4,      24,      0,    0,  0, 0]
[        0,        0,     120,       0,      0,    0,  0, 0,         0,        0,     120,       0,      0,    0,  0, 0,         0,        0,     120,       0,      0,    0,  0, 0,         0,        0,     120,       0,      0,    0,  0, 0]
[2520*x1^2,   720*x1,     120,       0,      0,    0,  0, 0, 2520*x2^2,   720*x2,     120,       0,      0,    0,  0, 0, 2520*x3^2,   720*x3,     120,       0,      0,    0,  0, 0, 2520*x4^2,   720*x4,     120,       0,      0,    0,  0, 0]
[        0,      720,       0,       0,      0,    0,  0, 0,         0,      720,       0,       0,      0,    0,  0, 0,         0,      720,       0,       0,      0,    0,  0, 0,         0,      720,       0,       0,      0,    0,  0, 0]
[  5040*x1,      720,       0,       0,      0,    0,  0, 0,   5040*x2,      720,       0,       0,      0,    0,  0, 0,   5040*x3,      720,       0,       0,      0,    0,  0, 0,   5040*x4,      720,       0,       0,      0,    0,  0, 0]
 
 
master_coefs =
 
c1_1
c2_1
c3_1
c4_1
c5_1
c6_1
c7_1
c8_1
c1_2
c2_2
c3_2
c4_2
c5_2
c6_2
c7_2
c8_2
c1_3
c2_3
c3_3
c4_3
c5_3
c6_3
c7_3
c8_3
c1_4
c2_4
c3_4
c4_4
c5_4
c6_4
c7_4
c8_4
 

cnstr_table =

     0     0     0
     1     1     1
     2     0     2
     3    -1     1
     4     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
     0     0     0
----------------
trace in traj_generatorxwu
when nargin <3:
t=0
traj_time = 0    3.4641    6.9282   10.3923   13.8564
traj_time(end)=13.8564
t_index = 1

t=Inf
t changes to 13.8564
t_index = 5
t changes to 3.4641
scale = -3;
index[33,34,35,36,37,38,39,40]


constraints =

     1
     0
     0
     0
     0
     0
     0
     0

 
coefs =
 
(5*3^(1/2))/2592
         -35/864
  (7*3^(1/2))/72
         -35/144
               0
               0
               0
               1
 

coefx =

   -0.0033   -0.0033   -0.0033   -0.0033
    0.0405    0.0405    0.0405    0.0405
   -0.1684   -0.1684   -0.1684   -0.1684
    0.2431    0.2431    0.2431    0.2431
         0         0         0         0
         0         0         0         0
         0         0         0         0
         0    1.0000    2.0000    3.0000


coefy =

   -0.0033    0.0033    0.0033   -0.0033
    0.0405   -0.0405   -0.0405    0.0405
   -0.1684    0.1684    0.1684   -0.1684
    0.2431   -0.2431   -0.2431    0.2431
         0         0         0         0
         0         0         0         0
         0         0         0         0
         0    1.0000         0   -1.0000


coefz =

   -0.0033   -0.0033    0.0033    0.0033
    0.0405    0.0405   -0.0405   -0.0405
   -0.1684   -0.1684    0.1684    0.1684
    0.2431    0.2431   -0.2431   -0.2431
         0         0         0         0
         0         0         0         0
         0         0         0         0
         0    1.0000    2.0000    1.0000

t0 generated by polyT
t0 =

   1.0e+03 *

    0.0010
   -0.0030
    0.0090
   -0.0270
    0.0810
   -0.2430
    0.7290
   -2.1870

Notes from traj_generatorxwu:
% Si = traj_time;
% Ti = d0; %or set to 15 sec

% -- temp --
% t = 0.05;
% S = [0, 3.4641, 6.9282, 10.3923, 13.8564];
% T = [3.4641    3.4641    3.4641    3.4641];
% textbook: i = code i+1, 
% textbook: Si i: 1-4 = code S(i+1) i: 2 - 5, 
% S(1) = 0 and fro i = 2, ... n+1, S(i)=sum(Ti) for k= 2,.. n+1:
% pt(1) = a11 + a12*x ... + a18*x^7  S(1+1)=S(i+1) T(1=i)
% pt(2) = a21 + a22*x ... + a28*x^7  S(2+1)=S(i+1) T(2=i)
% pt(3) = a31 + a32*x.. + a38*x^7  S(3+1)=S(i+1) T(3=i)
% pt(4) = a41 + a42*x... + a48*x^7  S(4+1), T(4=i)
% -- temp end --

% n = 4; % for n+1 = 5 waypoints
% [nrow, ncol] = deal(n, 8);

% (18) minimum snap trajectory defined by 4/four of 7th order polynomial pi
% a(i,j): 4*8=32 coefficients to solve
% syms a [nrow ncol];
% A = zeros(32,1);
% pt = zeros(nrow, 1);
% for i = 1:nrow
%     x = (t - S(i))/T(i);
%     for j = 1:ncol
%         pt(i) = pt(i) + a(i, j) * x^(j-1);
%     end
% end 
% pt

% -- my code ends ---


% desired_state.pos = zeros(3,1);
% desired_state.vel = zeros(3,1);
% desired_state.acc = zeros(3,1);
% desired_state.yaw = 0;


% waypoints0 =
% 
%      0     1     2     3     4
%      0     1     0    -1     0
%      0     1     2     1     0
% 
% traj_time/Si: 
% Si =
% 
%          0    3.4641    6.9282   10.3923   13.8564
% 
% d0/Ti:
% Ti =
% 
%     3.4641    3.4641    3.4641    3.4641
% 

